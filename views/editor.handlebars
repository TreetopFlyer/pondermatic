<style>
    *[data-import-csv]{
        padding:20px;
        border:1px dashed #aaa;
        background:#ddd;
        text-align:center;
    }
    *[data-import-csv].Import{
        background:#aaa;
        color:#fff;
        border:1px dashed #fff;
    }
    ul.Labels{
        float:left;
        min-width:120px;
        margin:0;
        padding:0;
        overflow:hidden;
    }
    ul.Labels li{
        display:block;
        position:relative;
        float:left;
        width:15px;
        height:15px;
        margin:2px;
        border:1px solid #444;
        border-radius:3px;
        background:none;
    }
    ul.Labels li.Active{
        background:#000;
    }
    ul.Labels.Human li:hover{
        background:#aaa;
    }
    ul.Labels.Machine span{
        display:block;
        position:absolute;
        top:0px;
        left:0px;
        width:100%;
        height:100%;
        
        background: #000;
        opacity:0;
    }

    th dl{
        margin-right:50px;
    }
    th dd{
        border-bottom:1px solid #eee;
        font-weight:normal;
        font-size:10px;
    }
    td span{
        display:block;
    }
    td span.Mapped{
        font-style: italic;
        color:#aaa;
        font-size:10px;
    } 
</style>
<div ng-app="Application" ng-controller="Controller">
    <div class="container" data-project-id="{{_id}}">
        <div class="row">
            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Project</h3>
                </div>
                <div class="panel-body">
                    <div data-import-csv>drag CSV here to import</div>
                </div>
                <div class="panel-body">
                    <form ng-submit="saveFile.methods.save();">
                        <div class="input-group">
                            <span class="input-group-addon">Project name:</span>
                            <input class="form-control" ng-model="saveFile.state.profile.name" type="text"/>
                        </div>
                        <br/>
                        <button class="btn btn-primary">Save</button>
                    </form>
                </div>
            </div>
            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Training</h3>
                </div>
                <div class="panel-body">
                    <button class="btn btn-primary" ng-click="webWorker.methods.start()">train</button>
                </div>
            </div>
            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Debug</h3>
                </div>
                <div class="panel-body">
                    <button class="btn btn-primary" ng-click="traceState()">SaveFile.State</button>
                    <button class="btn btn-primary" ng-click="traceWorker()">WebWorker.Job</button>
                </div>
            </div>
            
        </div>
    </div>
    

    
    <table class="table table-hover table-condensed">
        <thead>
            <th>Labels</th>
            <th ng-repeat="column in saveFile.state.headers">
                <dl>
                    <dd>min: <span>{[{column.min}]}</span></dd>
                    <dd>max: <span>{[{column.max}]}</span></dd>
                    <dd ng-repeat="unique in column.uniques track by $index">{[{unique}]}: <span>{[{$index}]}</span></dd>
                    <dt>{[{column.label}]}</dt>
                </dl>
            </th>
        </thead>
        <tbody>
            <tr ng-repeat="row in saveFile.state.data" ng-init="parentIndex = $index">
                <td>
                    <ul class="Labels Human">
                        <li ng-repeat="label in saveFile.state.labels[parentIndex].human track by $index"
                            ng-class="{'Active':label != false}"
                            ng-click="clickLabel(parentIndex, $index);">
                        </li>
                    </ul>
                    
                    <ul class="Labels Machine">
                        <li ng-repeat="label in saveFile.state.labels[parentIndex].machine track by $index">
                            <span style="opacity:{[{label}]};"></span>
                        </li>
                    </ul>

                </td>
                <td ng-repeat="cell in row track by $index">
                    <span class="Original">{[{cell}]}</span>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<script src="/static/editor.js"></script>